<style>
h1 {
    font-size: 80px;
    text-align: center;
}
h2 {
    font-size: 60px;
}
{
    text-align: justify;

}
section.fio {
    text-align: right;
}
</style>

# Лабораторная работа №5
<!-- _class: fio -->
Унтевская Валерия
НПИбд-02-19

---

## Цель работы
 Изучение механизмов изменения идентификаторов, применения SetUID- и Sticky-битов. Получение практических навыков работы в консоли с дополнительными атрибутами. Рассмотрение работы механизма смены идентификатора процессов пользователей, а также влияние бита Sticky на запись и удаление файлов.

---

### Выполнение лабораторной работы
1. Вошла в систему от имени пользователя guest и создала программу simpleid.c (рис. 1).

![Рис.1](imag/1.png)
 
---

2. Скомпилировала программу и убедилась, что файл программы создан. Выполнила программу simpleid. Выполнила системную программу id. В отличие от команды id, моя программа не выводит контекст и все группы, в которые пользователь (рис. 2).

![Рис.2](imag/2.png)

---

3. Усложнила программу, добавив вывод действительных идентификаторов (рис. 3).

![Рис.3](imag/3.png)

---

4. Получившуюся программу назвала simpleid2.c. Скомпилировала и запустила simpleid2.c (рис. 4).

![Рис.4](imag/4.png)

---

5. От имени суперпользователя выполнила команды chown root:guest /home/guest/simpleid2 и chmod u+s /home/guest/simpleid2. Первая команда меняет владельца файла simpleid2 на группу guest. Вторая команда меняет права доступа к файлу simpleid2 для пользователя и установленные атрибуты SUID или SGID позволяют запускать файл на выполнение с правами владельца файла или группы соответственно. Выполнила проверку правильности установки новых атрибутов и смены владельца файла simpleid2. Запустила simpleid2 и id. Сравнила результаты (рис. 5).

![Рис. 5.](imag/5.png)

---

6. Проделала тоже самое относительно SetGID-бита (рис. 6).

![Рис. 6.](imag/5.png)

---

7. Создала программу readfile.c (рис. 7).

![Рис. 7.](imag/6.png)

---

8. Откомпилировала программу. Сменила владельца у файла readfile.c и изменила права так, чтобы только суперпользователь (root) мог прочитать его, a guest не мог. Проверила, что пользователь guest не может прочитать файл readfile.c. Сменила у программы readfile владельца и установила SetU’D-бит. Проверила, может ли программа readfile прочитать файл readfile.c (рис. 8).

![Рис. 8.](imag/7.png)

---

9. Выяснила, установлен ли атрибут Sticky на директории /tmp. От имени пользователя guest создала файл file01.txt в директории/tmp со словом test. Просмотрела атрибуты у только что созданного файла и разрешила чтение и запись для категории пользователей «все остальные» (рис. 9).

![Рис. 9.](imag/8.png)

---

10. От пользователя guest2 попробовала прочитать файл /tmp/file01.txt. От пользователя guest2 попробовала дозаписать в файл /tmp/file01.txt слово test2. Удалось выполнить операцию. Проверила содержимое файла. От пользователя guest2 попробовала записать в файл /tmp/file01.txt слово test3, стерев при этом всю имеющуюся в файле информацию. Удалось выполнить операцию. Проверила содержимое файла. От пользователя guest2 попробовала удалить файл /tmp/file01.tx. Не удалось выполнить операцию. Повысила свои права до суперпользователя и выполнила после этого команду, снимающую атрибут t (Sticky-бит) с директории /tmp. Покинула режим суперпользователя. От пользователя guest2 проверила, что атрибута t у директории /tmp нет. Повторила предыдущие шаги. Удалось успешно выполнить каждый шаг. Повысила свои права до суперпользователя и вернула атрибут t на директорию /tmp (рис. 10).

![Рис. 10.](imag/9.png)

---

# Выводы

Изучила механизмы изменения идентификаторов, применения SetUID- и Sticky-битов. Получила практические навыки работы в консоли с дополнительными атрибутами. Рассмотрела работы механизма смены идентификатора процессов пользователей, а также влияние бита Sticky на запись и удаление файлов.
